# üöÄ Sprint 1: Foundation & Identity (–î–µ—Ç–∞–ª—å–Ω–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è)

## 1. –°–ª–æ–π –î–∞–Ω–Ω—ã—Ö (Database & Prisma)
- **Multi-tenancy Architecture:** - –°–æ–∑–¥–∞–Ω–∏–µ –º–æ–¥–µ–ª–µ–π `Business`, `Enterprise`, `Unit`.
    - –°–≤—è–∑—å `User` -> `Business` —á–µ—Ä–µ–∑ —Ç–∞–±–ª–∏—Ü—É `Member` —Å —Ä–æ–ª—è–º–∏ (Admin, Manager, Staff).
    - [CRITICAL] –í—Å–µ —Ç–∞–±–ª–∏—Ü—ã (–∫—Ä–æ–º–µ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤) –æ–±—è–∑–∞–Ω—ã –∏–º–µ—Ç—å `businessId`.
- **Ownership Handshake Logic:**
    - –ü–æ–ª—è `handshakeStatus`, `handshakeInitiatedAt`, `newOwnerId` –≤ –º–æ–¥–µ–ª–∏ `Business`.
    - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è `AuditLog` –¥–ª—è –∑–∞–ø–∏—Å–∏ –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π SU (Super-User) –∏ –í–ª–∞–¥–µ–ª—å—Ü–µ–≤.
- **Soft Delete 2.0:** –ì–ª–æ–±–∞–ª—å–Ω—ã–π –º–∏–∫—Å–∏–Ω/middleware –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ `is_archived: true`.

## 2. API & Security (tRPC)
- **Auth System:**
    - `auth.login`: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è Magic Link (—Å—Ä–æ–∫ –∂–∏–∑–Ω–∏ 15 –º–∏–Ω).
    - `auth.callback`: –û–±–º–µ–Ω —Ç–æ–∫–µ–Ω–∞ –Ω–∞ —Å–µ—Å—Å–∏—é.
    - `auth.getSessions`: –°–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ (Session Audit).
- **Handshake Module:**
    - `handshake.initiate`: –ó–∞–ø—É—Å–∫ –∫—É–ª–¥–∞—É–Ω–∞ 168 —á–∞—Å–æ–≤.
    - `handshake.revoke`: –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –æ—Ç–º–µ–Ω–∞ –ø–µ—Ä–µ–¥–∞—á–∏ (Revocation logic).
- **Unit Management:**
    - CRUD –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–æ—á–∫–∞–º–∏.
    - –õ–æ–≥–∏–∫–∞ "Capabilities": –µ—Å–ª–∏ —É —é–Ω–∏—Ç–∞ –Ω–µ—Ç —Ç–µ–≥–∞ `üë• –®—Ç–∞—Ç`, tRPC-—Ä–æ—É—Ç–µ—Ä—ã –ú–æ–¥—É–ª—è 3/4 –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç `TRPCError(FORBIDDEN)`.

## 3. Frontend Foundation (SCSS & Layout)
- **Design Tokens (`_variables.scss`):** - –¶–≤–µ—Ç–∞: `$bgCanvas` (#020617), `$bgSurface` (rgba 0.6), `$accentPrimary` (#10b981).
    - –≠—Ñ—Ñ–µ–∫—Ç—ã: `$blurMd` (12px), `$radiusMain` (16px).
- **Global Mixins (`_mixins.scss`):**
    - `@mixin glassCard`: —ç—Ñ—Ñ–µ–∫—Ç –º–∞—Ç–æ–≤–æ–≥–æ —Å—Ç–µ–∫–ª–∞.
    - `@mixin radialGlow`: —Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —Å–≤–µ—á–µ–Ω–∏—è –∑–∞ –∫—É—Ä—Å–æ—Ä–æ–º.
- **Layout Architecture:**
    - `Sidebar`: Bento-grid –Ω–∞–≤–∏–≥–∞—Ü–∏—è —Å Radial Highlight.
    - `Command Palette (Cmd+K)`: –ì–ª–æ–±–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫ —á–µ—Ä–µ–∑ Radix UI.
    - `Breadcrumbs`: –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∏–µ—Ä–∞—Ä—Ö–∏—è `–ë–∏–∑–Ω–µ—Å > –ü—Ä–µ–¥–ø—Ä–∏—è—Ç–∏–µ > –Æ–Ω–∏—Ç`.

## 4. –ö–∞—á–µ—Å—Ç–≤–æ –∏ –ò–Ω—Å–ø–µ–∫—Ü–∏—è
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ `prisma.config.ts` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ).
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Biome/ESLint –¥–ª—è –∑–∞–ø—Ä–µ—Ç–∞ `any` –∏ `throw new Error()`.
- –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –±–∞–∑–æ–≤–æ–≥–æ –∫–ª–∞—Å—Å–∞ `AppError extends TRPCError`.
