<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Coffee-ERP | Smart Schedule</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@500&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary: #f0533a;
            --bg-body: #F9FAFB;
            --bg-surface: #ffffff;
            --text-main: #111827;
            --text-sec: #6B7280;
            --border: #E5E7EB;
            --line-soft: rgba(0,0,0,0.05);
            
            --success: #10B981;
            --warning: #F59E0B;
            --danger: #EF4444;
            
            --slot-h: 70px; /* Высота строки сотрудника */
            --col-w: 140px; /* Ширина колонки дня */
            
            --shadow-float: 0 10px 30px -5px rgba(0, 0, 0, 0.08);
            --trans: all 0.2s cubic-bezier(0.2, 0.8, 0.2, 1);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', sans-serif; -webkit-tap-highlight-color: transparent; }
        body { background: var(--bg-body); color: var(--text-main); height: 100dvh; display: flex; flex-direction: column; overflow: hidden; }

        /* HEADER */
        .header {
            height: 70px; padding: 0 32px; display: flex; justify-content: space-between; align-items: center;
            background: rgba(255,255,255,0.9); backdrop-filter: blur(12px); border-bottom: 1px solid var(--border);
            z-index: 50; flex-shrink: 0;
        }

        .week-selector { display: flex; align-items: center; gap: 16px; background: #F3F4F6; padding: 4px; border-radius: 10px; }
        .ws-btn { width: 28px; height: 28px; display: flex; align-items: center; justify-content: center; border-radius: 8px; cursor: pointer; color: var(--text-sec); transition: 0.2s; }
        .ws-btn:hover { background: #fff; color: var(--text-main); box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
        .ws-label { font-size: 14px; font-weight: 600; padding: 0 8px; font-variant-numeric: tabular-nums; }

        .kpi-bar { display: flex; gap: 24px; align-items: center; }
        .kpi-item { display: flex; flex-direction: column; align-items: flex-end; }
        .kpi-lbl { font-size: 10px; font-weight: 700; color: var(--text-sec); text-transform: uppercase; }
        .kpi-val { font-size: 14px; font-weight: 700; font-family: 'JetBrains Mono', monospace; }
        .kpi-val.good { color: var(--success); }
        .kpi-val.bad { color: var(--danger); }

        .btn-magic {
            background: linear-gradient(135deg, #8B5CF6, #6366F1); color: #fff; border: none;
            padding: 8px 16px; border-radius: 10px; font-size: 13px; font-weight: 600;
            display: flex; align-items: center; gap: 6px; cursor: pointer; transition: 0.2s;
            box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
        }
        .btn-magic:hover { transform: translateY(-2px); box-shadow: 0 8px 16px rgba(99, 102, 241, 0.4); }

        /* SCHEDULE CONTAINER */
        .schedule-wrap { flex: 1; overflow: auto; display: flex; flex-direction: column; position: relative; }

        /* GRID HEADER (DAYS) */
        .grid-header {
            display: flex; position: sticky; top: 0; z-index: 40; background: #fff;
            border-bottom: 1px solid var(--border); min-width: fit-content;
        }
        .gh-col-first { width: 220px; padding: 16px 24px; font-size: 12px; font-weight: 700; color: var(--text-sec); background: #fff; position: sticky; left: 0; z-index: 45; border-right: 1px solid var(--line-soft); }
        .gh-col { width: var(--col-w); padding: 12px; border-right: 1px solid var(--line-soft); text-align: center; }
        .gh-day { font-size: 13px; font-weight: 600; margin-bottom: 4px; }
        .gh-date { font-size: 11px; color: var(--text-sec); }
        .gh-col.today { background: #FFF7ED; }
        .gh-col.today .gh-day { color: var(--primary); }

        /* GRID BODY */
        .grid-body { min-width: fit-content; }
        
        .grid-row { display: flex; border-bottom: 1px solid var(--line-soft); height: var(--slot-h); }
        
        /* User Info Column (Sticky Left) */
        .gr-user {
            width: 220px; position: sticky; left: 0; z-index: 30; background: #fff;
            border-right: 1px solid var(--line-soft); padding: 0 24px;
            display: flex; align-items: center; gap: 12px;
        }
        .u-avatar { width: 36px; height: 36px; border-radius: 50%; object-fit: cover; background: #eee; }
        .u-role { font-size: 10px; padding: 2px 6px; border-radius: 4px; margin-top: 2px; display: inline-block; }
        .role-mgr { background: #ECFDF5; color: #059669; }
        .role-bar { background: #FFF7ED; color: #EA580C; }

        /* Day Slots */
        .gr-slot {
            width: var(--col-w); border-right: 1px solid var(--line-soft);
            position: relative; padding: 6px; transition: 0.2s;
        }
        .gr-slot:hover { background: #F9FAFB; }
        .gr-slot.today { background: rgba(255, 247, 237, 0.3); }

        /* SHIFT BLOCKS */
        .shift-block {
            height: 100%; border-radius: 8px; font-size: 12px;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            cursor: pointer; position: relative; transition: var(--trans);
            border: 1px solid transparent; overflow: hidden;
        }
        .shift-block:hover { transform: translateY(-2px); box-shadow: 0 4px 10px rgba(0,0,0,0.08); z-index: 10; }
        
        /* Shift Types */
        .sh-assigned {
            background: #EFF6FF; color: #1E40AF; border-color: #DBEAFE;
        }
        .sh-assigned:hover { background: #DBEAFE; }

        .sh-manager {
            background: #ECFDF5; color: #047857; border-color: #D1FAE5;
        }

        /* Ghost / Warning Shifts */
        .sh-ghost {
            border: 2px dashed #E5E7EB; background: transparent; color: #9CA3AF;
        }
        .sh-ghost:hover { border-color: var(--primary); color: var(--primary); background: #FFF0ED; }
        
        .sh-warning {
            background: #FEF2F2; color: #B91C1C; border-color: #FECACA;
            animation: pulse-red 2s infinite;
        }
        @keyframes pulse-red {
            0% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.4); }
            70% { box-shadow: 0 0 0 6px rgba(239, 68, 68, 0); }
            100% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0); }
        }

        .sh-time { font-weight: 700; font-family: 'JetBrains Mono', monospace; }
        .sh-loc { font-size: 10px; opacity: 0.8; }

        /* CONFLICT INDICATOR */
        .conflict-badge {
            position: absolute; top: -6px; right: -6px; width: 18px; height: 18px;
            background: var(--danger); color: #fff; border-radius: 50%; font-size: 10px;
            display: flex; align-items: center; justify-content: center; font-weight: 800;
            border: 2px solid #fff;
        }

        /* TOTALS ROW */
        .totals-row { height: 50px; background: #F9FAFB; border-top: 1px solid var(--border); }
        .tr-head { background: #F9FAFB; font-size: 11px; font-weight: 700; color: var(--text-sec); text-transform: uppercase; justify-content: flex-end; }
        .tr-val { font-size: 12px; font-weight: 700; color: var(--text-sec); display: flex; align-items: center; justify-content: center; }

        /* MOBILE OVERRIDE */
        @media (max-width: 768px) {
            .header { padding: 16px; flex-direction: column; align-items: flex-start; height: auto; gap: 16px; }
            .week-selector { width: 100%; justify-content: space-between; }
            .kpi-bar { width: 100%; justify-content: space-between; }
            .gh-col-first, .gr-user { width: 60px; padding: 0 10px; justify-content: center; }
            .u-info { display: none; } /* Hide names, keep avatars on mobile */
            .gh-col-first span { display: none; } /* Hide "Employee" text */
        }
    </style>
</head>
<body>

    <header class="header">
        <div class="week-selector">
            <div class="ws-btn">←</div>
            <div class="ws-label">20 Дек – 26 Дек</div>
            <div class="ws-btn">→</div>
        </div>

        <div class="kpi-bar">
            <div class="kpi-item">
                <span class="kpi-lbl">Прогноз Выручки</span>
                <span class="kpi-val">840,000 ₽</span>
            </div>
            <div class="kpi-item">
                <span class="kpi-lbl">ФОТ (Labor Cost)</span>
                <span class="kpi-val bad">172,000 ₽ (20.5%)</span>
            </div>
            <button class="btn-magic">
                <span>✨</span> Авто-заполнение
            </button>
        </div>
    </header>

    <div class="schedule-wrap">
        
        <div class="grid-header">
            <div class="gh-col-first"><span>Сотрудник</span></div>
            <div class="gh-col">
                <div class="gh-day">ПН</div><div class="gh-date">20</div>
            </div>
            <div class="gh-col">
                <div class="gh-day">ВТ</div><div class="gh-date">21</div>
            </div>
            <div class="gh-col today">
                <div class="gh-day">СР</div><div class="gh-date">22</div>
            </div>
            <div class="gh-col">
                <div class="gh-day">ЧТ</div><div class="gh-date">23</div>
            </div>
            <div class="gh-col">
                <div class="gh-day">ПТ</div><div class="gh-date">24</div>
            </div>
            <div class="gh-col">
                <div class="gh-day">СБ</div><div class="gh-date">25</div>
            </div>
            <div class="gh-col">
                <div class="gh-day">ВС</div><div class="gh-date">26</div>
            </div>
        </div>

        <div class="grid-body">
            
            <div class="grid-row">
                <div class="gr-user">
                    <img src="https://ui-avatars.com/api/?name=Maria+I&background=059669&color=fff" class="u-avatar">
                    <div class="u-info">
                        <div style="font-size:13px; font-weight:600;">Мария И.</div>
                        <div class="u-role role-mgr">Manager</div>
                    </div>
                </div>
                
                <div class="gr-slot">
                    <div class="shift-block sh-manager">
                        <span class="sh-time">09:00 - 18:00</span>
                        <span class="sh-loc">Админ</span>
                    </div>
                </div>
                <div class="gr-slot"></div> <div class="gr-slot today">
                    <div class="shift-block sh-manager">
                        <span class="sh-time">10:00 - 19:00</span>
                    </div>
                </div>
                <div class="gr-slot">
                     <div class="shift-block sh-manager">
                        <span class="sh-time">09:00 - 18:00</span>
                    </div>
                </div>
                <div class="gr-slot"></div>
                <div class="gr-slot"></div>
                <div class="gr-slot"></div>
            </div>

            <div class="grid-row">
                <div class="gr-user">
                    <img src="https://ui-avatars.com/api/?name=Alex+K&background=EA580C&color=fff" class="u-avatar">
                    <div class="u-info">
                        <div style="font-size:13px; font-weight:600;">Александр</div>
                        <div class="u-role role-bar">Barista</div>
                    </div>
                </div>
                
                <div class="gr-slot"></div>
                <div class="gr-slot">
                    <div class="shift-block sh-assigned">
                        <span class="sh-time">07:00 - 19:00</span>
                        <span class="sh-loc">Зал</span>
                    </div>
                </div>
                <div class="gr-slot today">
                    <div class="shift-block sh-assigned">
                        <span class="sh-time">07:00 - 15:00</span>
                        <span class="sh-loc">Зал</span>
                    </div>
                </div>
                <div class="gr-slot">
                    <div class="shift-block sh-assigned">
                         <span class="sh-time">07:00 - 19:00</span>
                    </div>
                </div>
                <div class="gr-slot">
                     <div class="shift-block sh-warning">
                         <div class="conflict-badge">!</div>
                         <span class="sh-time">07:00 - 23:00</span>
                         <span class="sh-loc">Переработка</span>
                    </div>
                </div>
                <div class="gr-slot">
                     <div class="shift-block sh-assigned">
                         <span class="sh-time">10:00 - 22:00</span>
                    </div>
                </div>
                <div class="gr-slot"></div>
            </div>

            <div class="grid-row">
                <div class="gr-user">
                    <img src="https://ui-avatars.com/api/?name=Bob+D&background=3B82F6&color=fff" class="u-avatar">
                    <div class="u-info">
                        <div style="font-size:13px; font-weight:600;">Борис Д.</div>
                        <div class="u-role role-bar">Barista</div>
                    </div>
                </div>
                
                <div class="gr-slot">
                    <div class="shift-block sh-assigned">
                        <span class="sh-time">12:00 - 21:00</span>
                    </div>
                </div>
                <div class="gr-slot"></div>
                <div class="gr-slot today">
                     <div class="shift-block sh-ghost" title="Нажмите, чтобы подтвердить смену">
                         <span style="font-size:16px; margin-bottom:2px;">+</span>
                         <span class="sh-loc">Нужен слот</span>
                         <span class="sh-time">15:00 - 21:00</span>
                    </div>
                </div>
                <div class="gr-slot"></div>
                <div class="gr-slot">
                    <div class="shift-block sh-assigned">
                        <span class="sh-time">17:00 - 23:00</span>
                    </div>
                </div>
                <div class="gr-slot">
                    <div class="shift-block sh-assigned">
                        <span class="sh-time">08:00 - 20:00</span>
                    </div>
                </div>
                <div class="gr-slot">
                    <div class="shift-block sh-assigned">
                        <span class="sh-time">09:00 - 21:00</span>
                    </div>
                </div>
            </div>

            <div class="grid-row totals-row">
                <div class="gr-user tr-head">Часов в день:</div>
                <div class="gr-slot tr-val">21ч</div>
                <div class="gr-slot tr-val">12ч</div>
                <div class="gr-slot tr-val">14ч</div> <div class="gr-slot tr-val">21ч</div>
                <div class="gr-slot tr-val" style="color:var(--danger)">32ч</div> <div class="gr-slot tr-val">24ч</div>
                <div class="gr-slot tr-val">12ч</div>
            </div>

        </div>
    </div>

</body>
</html>
